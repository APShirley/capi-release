---
name: cc_uploader

templates:
  cc_uploader_ctl.erb: bin/cc_uploader_ctl
  cc_uploader_as_vcap.erb: bin/cc_uploader_as_vcap
  cc_uploader_config.json.erb: config/cc_uploader_config.json
  cc_ca.crt.erb: config/certs/cc/ca.crt
  cc_uploader_client.crt.erb: config/certs/cc/client.crt
  cc_uploader_client.key.erb: config/certs/cc/client.key

  cc_uploader_server_ca.crt.erb: config/certs/cc_uploader/ca.crt
  cc_uploader_server.crt.erb: config/certs/cc_uploader/server.crt
  cc_uploader_server.key.erb: config/certs/cc_uploader/server.key

packages:
  - capi_utils
  - cc_uploader

properties:
  capi.cc_uploader.listen_addr:
    description: "Address of interface on which to serve files"
    default: "0.0.0.0:9090"
  capi.cc_uploader.debug_addr:
    description: "address at which to serve debug info"
    default: "127.0.0.1:17018"
  capi.cc_uploader.cc.job_polling_interval_in_seconds:
    description: "the interval between job polling requests"
  capi.cc_uploader.log_level:
    description: "Log level"
    default: "info"
  capi.cc_uploader.dropsonde_port:
    description: "local metron agent's port"
    default: 3457
  capi.cc_uploader.consul_agent_port:
    description: "local consul agent's port"
    default: 8500
  capi.cc_uploader.cc.ca_cert:
    description: "PEM-encoded CA certificate"
  capi.cc_uploader.cc.client_cert:
    description: "PEM-encoded client certificate"
  capi.cc_uploader.cc.client_key:
    description: "PEM-encoded client key"

  capi.cc_uploader.mutual_tls.listen_addr:
    default: "0.0.0.0:9091"
  capi.cc_uploader.mutual_tls.ca_cert:
    description: "PEM-encoded CA certificate for secure, mutually authenticated TLS communication"
  capi.cc_uploader.mutual_tls.server_cert:
    description: "PEM-encoded certificate for secure, mutually authenticated TLS communication"
  capi.cc_uploader.mutual_tls.server_key:
    description: "PEM-encoded key for secure, mutually authenticated TLS communication"
